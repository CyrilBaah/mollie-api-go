{
  "name": "Golang devcontainer",
  "build": {
    "dockerfile": "Dockerfile",
    "args": {
      "GO_VERSION": "1-bullseye"
    }
  },
  "mounts": [
    "source=${localEnv:HOME}/.zshrc,target=/root/.zshrc,type=bind,consistency=cached"
  ],
  "runArgs": [
    "--cap-add=SYS_PTRACE",
    "--security-opt",
    "seccomp=unconfined"
  ],
  "customizations": {
    "vscode": {
      "extensions": [
        "golang.Go",
        "GitHub.vscode-pull-request-github",
        "aaron-bond.better-comments",
        "pnp.polacode",
        "eamodio.gitlens",
        "jasonlhy.hungry-delete",
        "formulahendry.auto-rename-tag",
        "DavidAnson.vscode-markdownlint",
        "streetsidesoftware.code-spell-checker",
        "PKief.material-icon-theme"
      ],
      "settings": {
        "go.toolsManagement.checkForUpdates": "local",
        "go.toolsManagement.autoUpdate": true,
        "go.gopath": "/go",
        "go.goroot": "/usr/local/go",
        "go.useLanguageServer": true,
        "[go]": {
          "editor.codeActionsOnSave": {
            "source.organizeImports": true
          }
        },
        "[go.mod]": {
          "editor.codeActionsOnSave": {
            "source.organizeImports": true
          }
        },
        "gopls": {
          "build.buildFlags": [
            "-tags",
            ""
          ],
          "formatting.gofumpt": true,
          "ui.completion.usePlaceholders": false,
          "ui.diagnostic.staticcheck": true,
          "ui.semanticTokens": true
        },
        "go.lintTool": "golangci-lint",
        "go.lintOnSave": "package",
        "go.toolsEnvVars": {
          "CGO_ENABLED": 1
        },
        "go.testFlags": [
          "-v",
          "-race"
        ],
        "go.testTimeout": "30s",
        "go.coverOnSingleTest": true,
        "go.coverOnSingleTestFile": true,
        "go.coverOnTestPackage": true,
        "editor.formatOnSave": true,
        "editor.formatOnPaste": true,
        "editor.bracketPairColorization.enabled": true,
        "editor.guides.bracketPairs": "active",
        "files.insertFinalNewline": true
      }
    }
  },
  "portsAttributes": {
    "9000": {
      "label": "Hello Remote World",
      "onAutoForward": "notify"
    }
  },
  "postCreateCommand": {
    "modules": "go mod download"
  },
  "remoteUser": "root",
  "containerUser": "root"
}
